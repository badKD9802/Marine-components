        :root {
            --primary: #003366;
            --primary-dark: #001f3f;
            --primary-light: #e6f2ff;
            --accent: #0099cc;
            --accent-light: #00b8e6;
            --success: #28a745;
            --warning: #ff9800;
            --error: #dc3545;
            --text-dark: #1a1a1a;
            --text-regular: #333333;
            --text-light: #666666;
            --text-muted: #999999;
            --bg-white: #ffffff;
            --bg-gray: #f8f9fa;
            --bg-gray-100: #f1f3f5;
            --border: #e9ecef;
            --border-light: #f0f0f0;
            --gradient: linear-gradient(135deg, #003366 0%, #0099cc 100%);
            --shadow-sm: 0 1px 3px rgba(0,0,0,0.08);
            --shadow-md: 0 4px 12px rgba(0,0,0,0.1);
            --shadow-lg: 0 8px 24px rgba(0,0,0,0.15);
        }

        body.dark {
            --primary: #66a3d2;
            --primary-dark: #4a8bb8;
            --primary-light: #1a2332;
            --accent: #4db8e8;
            --accent-light: #69c5ed;
            --text-dark: #e8e8e8;
            --text-regular: #d0d0d0;
            --text-light: #b0b0b0;
            --text-muted: #888888;
            --bg-white: #1e1e1e;
            --bg-gray: #2a2a2a;
            --bg-gray-100: #333333;
            --border: #404040;
            --border-light: #353535;
            --shadow-sm: 0 1px 3px rgba(0,0,0,0.3);
            --shadow-md: 0 4px 12px rgba(0,0,0,0.4);
            --shadow-lg: 0 8px 24px rgba(0,0,0,0.5);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Noto Sans KR', 'Segoe UI', sans-serif;
            background: var(--bg-gray);
            color: var(--text-regular);
            min-height: 100vh;
        }

        /* ===== 헤더 ===== */
        .header {
            background: var(--gradient);
            color: white;
            padding: 14px 24px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 8px rgba(0,51,102,0.3);
            position: relative;
            z-index: 10;
        }
        .header h1 { font-size: 1.15rem; font-weight: 600; letter-spacing: -0.3px; }
        .header .logout-btn {
            background: rgba(255,255,255,0.15);
            border: 1px solid rgba(255,255,255,0.3);
            color: white;
            padding: 6px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.8rem;
            font-weight: 500;
            transition: all 0.2s;
        }
        .header .logout-btn:hover { background: rgba(255,255,255,0.25); }

        /* ===== 로그인 ===== */
        .login-container {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
            background: linear-gradient(135deg, #f5f7fa 0%, #e4e8ec 100%);
        }
        .login-box {
            background: white;
            border-radius: 16px;
            padding: 48px 40px;
            box-shadow: var(--shadow-lg);
            width: 100%;
            max-width: 400px;
            text-align: center;
        }
        .login-box h1 { font-size: 1.5rem; color: var(--primary); margin-bottom: 6px; font-weight: 700; }
        .login-box p { color: var(--text-light); font-size: 0.875rem; margin-bottom: 32px; }
        .login-box input {
            width: 100%;
            padding: 12px 16px;
            border: 1.5px solid var(--border);
            border-radius: 10px;
            font-size: 0.95rem;
            margin-bottom: 16px;
            outline: none;
            transition: border-color 0.2s, box-shadow 0.2s;
        }
        .login-box input:focus { border-color: var(--accent); box-shadow: 0 0 0 3px rgba(0,153,204,0.1); }
        .login-box .error { color: var(--error); font-size: 0.8rem; margin-bottom: 12px; display: none; }

        /* ===== 버튼 ===== */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
            padding: 10px 22px;
            border: none;
            border-radius: 8px;
            font-size: 0.9rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
            font-family: inherit;
        }
        .btn-primary { background: var(--primary); color: white; }
        .btn-primary:hover { background: var(--primary-dark); transform: translateY(-1px); box-shadow: var(--shadow-sm); }
        .btn-primary:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }
        .btn-accent { background: var(--gradient); color: white; }
        .btn-accent:hover { opacity: 0.9; transform: translateY(-1px); }
        .btn-danger { background: var(--error); color: white; font-size: 0.78rem; padding: 5px 12px; border-radius: 6px; }
        .btn-danger:hover { background: #c82333; }
        .btn-ghost { background: transparent; color: var(--text-light); border: 1px solid var(--border); }
        .btn-ghost:hover { background: var(--bg-gray); }
        .btn-sm { font-size: 0.8rem; padding: 7px 16px; }

        /* ===== 대시보드 ===== */
        .dashboard { display: none; }

        /* ===== 탭 네비게이션 ===== */
        .tab-nav {
            display: flex;
            background: white;
            border-bottom: 1px solid var(--border);
            padding: 0 24px;
        }
        .tab-nav button {
            background: none;
            border: none;
            padding: 14px 28px;
            font-size: 0.9rem;
            font-weight: 500;
            color: var(--text-muted);
            cursor: pointer;
            border-bottom: 2.5px solid transparent;
            margin-bottom: -1px;
            transition: all 0.2s;
            font-family: inherit;
        }
        .tab-nav button.active { color: var(--primary); border-bottom-color: var(--accent); }
        .tab-nav button:hover { color: var(--primary); }
        .tab-divider {
            width: 1px;
            background: var(--border);
            margin: 8px 12px;
            align-self: stretch;
        }

        .tab-content { display: none; }
        .tab-content.active { display: block; }
        .content { max-width: 960px; margin: 0 auto; padding: 24px; }
        .tab-header {
            max-width: 900px;
            margin: 0 auto;
            padding: 24px 20px 16px 20px;
        }

        /* ===== 서비스 안내 탭 ===== */
        .guide-container { max-width: 960px; margin: 0 auto; padding: 32px 24px; }
        .guide-hero {
            background: var(--gradient);
            color: white;
            border-radius: 16px;
            padding: 48px 36px;
            text-align: center;
            margin-bottom: 32px;
            box-shadow: var(--shadow-md);
        }
        .guide-hero .hero-icon { font-size: 2.8rem; margin-bottom: 12px; }
        .guide-hero h2 { font-size: 1.6rem; font-weight: 700; margin-bottom: 8px; }
        .guide-hero p { font-size: 0.95rem; opacity: 0.9; line-height: 1.6; }
        .guide-cards { display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; margin-bottom: 32px; }
        .guide-card {
            background: white;
            border-radius: 14px;
            padding: 28px 20px;
            text-align: center;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            box-shadow: var(--shadow-sm);
            border: 1px solid var(--border);
        }
        .guide-card:hover { transform: translateY(-4px); box-shadow: var(--shadow-lg); }
        .guide-card .card-icon { font-size: 2.2rem; margin-bottom: 12px; }
        .guide-card .card-title { font-size: 1.05rem; font-weight: 600; color: var(--text-dark); margin-bottom: 8px; }
        .guide-card .card-desc { font-size: 0.82rem; color: var(--text-light); line-height: 1.5; margin-bottom: 16px; }
        .guide-card .card-link {
            display: inline-block;
            font-size: 0.82rem;
            font-weight: 600;
            color: var(--accent);
            padding: 6px 18px;
            border: 1.5px solid var(--accent);
            border-radius: 20px;
            transition: all 0.2s;
        }
        .guide-card:hover .card-link { background: var(--accent); color: white; }
        .guide-flow {
            background: white;
            border-radius: 14px;
            padding: 24px 28px;
            box-shadow: var(--shadow-sm);
            border: 1px solid var(--border);
        }
        .guide-flow h3 { font-size: 1rem; font-weight: 600; color: var(--text-dark); margin-bottom: 16px; }
        .guide-flow-steps {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            flex-wrap: wrap;
        }
        .guide-flow-step {
            background: var(--primary-light);
            color: var(--primary);
            font-size: 0.88rem;
            font-weight: 500;
            padding: 10px 20px;
            border-radius: 10px;
        }
        .guide-flow-arrow { color: var(--accent); font-size: 1.2rem; font-weight: 700; }
        @media (max-width: 768px) {
            .guide-cards { grid-template-columns: 1fr; }
            .guide-hero { padding: 32px 20px; }
            .guide-hero h2 { font-size: 1.3rem; }
        }

        /* ===== 업로드 영역 ===== */
        .upload-section { display: flex; gap: 16px; margin-bottom: 24px; }
        .upload-card {
            flex: 1;
            background: white;
            border: 2px dashed var(--border);
            border-radius: 14px;
            padding: 28px 20px;
            text-align: center;
            transition: all 0.25s;
            cursor: pointer;
        }
        .upload-card:hover { border-color: var(--accent); background: rgba(0,153,204,0.02); }
        .upload-card.dragover { border-color: var(--accent); background: var(--primary-light); }
        .upload-card .icon { font-size: 2rem; margin-bottom: 8px; }
        .upload-card .title { font-size: 0.9rem; font-weight: 600; color: var(--text-dark); margin-bottom: 4px; }
        .upload-card .subtitle { font-size: 0.75rem; color: var(--text-muted); }
        .upload-card input[type="file"] { display: none; }
        .purpose-label {
            display: inline-block;
            padding: 3px 10px;
            border-radius: 20px;
            font-size: 0.68rem;
            font-weight: 600;
            margin-bottom: 10px;
            letter-spacing: 0.3px;
        }
        .purpose-consultant { background: #d4edda; color: #155724; }
        .purpose-rag { background: #cce5ff; color: #004085; }

        /* ===== 업로드 진행 ===== */
        .upload-progress {
            display: none;
            background: white;
            border-radius: 10px;
            padding: 16px 20px;
            margin-bottom: 24px;
            box-shadow: var(--shadow-sm);
        }
        .upload-progress .file-name { font-weight: 500; margin-bottom: 8px; font-size: 0.9rem; }
        .progress-bar { height: 5px; background: var(--bg-gray-100); border-radius: 3px; overflow: hidden; }
        .progress-bar .fill {
            height: 100%;
            background: var(--gradient);
            border-radius: 3px;
            animation: progress-indeterminate 1.5s infinite;
        }
        @keyframes progress-indeterminate {
            0% { width: 0%; margin-left: 0; }
            50% { width: 60%; margin-left: 20%; }
            100% { width: 0%; margin-left: 100%; }
        }

        /* ===== 문서 테이블 ===== */
        .docs-section h2 { font-size: 1.05rem; font-weight: 600; margin-bottom: 14px; color: var(--text-dark); }
        .docs-table {
            width: 100%;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: var(--shadow-sm);
        }
        .docs-table table { width: 100%; border-collapse: collapse; }
        .docs-table th {
            text-align: left;
            padding: 11px 16px;
            background: var(--bg-gray);
            font-size: 0.75rem;
            font-weight: 600;
            color: var(--text-light);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        .docs-table td {
            padding: 11px 16px;
            border-top: 1px solid var(--border-light);
            font-size: 0.85rem;
        }
        .docs-table tr:hover td { background: var(--bg-gray); }
        .badge {
            display: inline-block;
            padding: 2px 10px;
            border-radius: 20px;
            font-size: 0.72rem;
            font-weight: 500;
        }
        .badge-done { background: #d4edda; color: #155724; }
        .badge-processing { background: #fff3cd; color: #856404; }
        .badge-error { background: #f8d7da; color: #721c24; }
        .badge-pending { background: var(--bg-gray-100); color: var(--text-muted); }
        .empty-state { text-align: center; padding: 48px 20px; color: var(--text-muted); }
        .empty-state .icon { font-size: 2rem; margin-bottom: 8px; }

        /* ===== 모달 ===== */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0,0,0,0.4);
            backdrop-filter: blur(4px);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        .modal-overlay.active { display: flex; }
        .modal {
            background: white;
            border-radius: 16px;
            width: 100%;
            max-width: 700px;
            max-height: 80vh;
            overflow-y: auto;
            padding: 28px;
            box-shadow: var(--shadow-lg);
        }
        .modal h3 { font-size: 1.1rem; margin-bottom: 16px; font-weight: 600; }
        .modal .chunk {
            background: var(--bg-gray);
            border-radius: 8px;
            padding: 12px 14px;
            margin-bottom: 8px;
            font-size: 0.8rem;
            line-height: 1.6;
            white-space: pre-wrap;
        }
        .modal .chunk-label { font-weight: 600; font-size: 0.72rem; color: var(--text-muted); margin-bottom: 4px; }
        .modal .close-btn {
            float: right;
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--text-muted);
            transition: color 0.2s;
        }
        .modal .close-btn:hover { color: var(--text-dark); }

        /* ============================================
           문서 내 Q&A 탭 — 모던 3컬럼 레이아웃
           ============================================ */
        .rag-layout {
            display: flex;
            height: calc(100vh - 105px);
            background: var(--bg-gray);
        }

        /* --- 왼쪽 사이드바: 대화 목록 --- */
        .sidebar-conv {
            width: 260px;
            background: white;
            border-right: 1px solid var(--border-light);
            display: flex;
            flex-direction: column;
        }
        .sidebar-conv-header {
            padding: 16px 16px 12px;
            border-bottom: 1px solid var(--border-light);
        }
        .sidebar-conv-header button { width: 100%; }
        .conv-list { flex: 1; overflow-y: auto; padding: 8px; }
        .conv-list::-webkit-scrollbar { width: 4px; }
        .conv-list::-webkit-scrollbar-thumb { background: var(--border); border-radius: 2px; }

        .conv-item {
            padding: 10px 14px;
            border-radius: 10px;
            cursor: pointer;
            margin-bottom: 3px;
            font-size: 0.84rem;
            color: var(--text-regular);
            display: flex;
            align-items: center;
            gap: 10px;
            transition: all 0.15s;
            position: relative;
        }
        .conv-item:hover { background: var(--bg-gray); }
        .conv-item.active { background: var(--primary-light); color: var(--primary); font-weight: 500; }
        .conv-item-icon {
            width: 32px; height: 32px;
            background: var(--bg-gray-100);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.85rem;
            flex-shrink: 0;
        }
        .conv-item.active .conv-item-icon { background: rgba(0,153,204,0.15); }
        .conv-title { flex: 1; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
        .conv-actions {
            display: none;
        }
        .conv-item:hover .conv-actions { display: none; }
        .conv-act-btn {
            background: none;
            border: none;
            color: var(--text-muted);
            cursor: pointer;
            font-size: 0.78rem;
            padding: 3px 5px;
            border-radius: 4px;
            transition: all 0.15s;
        }
        .conv-act-btn:hover { background: var(--bg-gray-100); }
        .conv-act-btn.del:hover { color: var(--error); background: #fee; }
        .conv-act-btn.edit:hover { color: var(--accent); }
        .conv-act-btn.save:hover { color: var(--warning); }

        /* 대화 그룹 헤더 */
        .conv-group-header {
            font-size: 0.72rem;
            font-weight: 600;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            padding: 12px 14px 6px;
            margin-top: 4px;
        }
        .conv-group-header:first-child { margin-top: 0; }

        /* 저장된 대화 아이콘 표시 */
        .conv-saved-badge {
            font-size: 0.7rem;
            color: var(--warning);
        }

        /* 인라인 이름 편집 */
        .conv-rename-input {
            flex: 1;
            border: 1.5px solid var(--accent);
            border-radius: 6px;
            padding: 3px 8px;
            font-size: 0.82rem;
            font-family: inherit;
            outline: none;
            background: white;
        }

        /* 채팅 헤더 (대화 선택 시 표시) */
        .chat-header-bar {
            display: none;
            align-items: center;
            justify-content: space-between;
            padding: 10px 24px;
            background: white;
            border-bottom: 1px solid var(--border-light);
        }
        .chat-header-bar.visible { display: flex; }
        .chat-header-title {
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--text-dark);
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }
        .chat-header-actions { display: flex; gap: 6px; }
        .btn-icon {
            background: var(--bg-gray);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 6px 12px;
            font-size: 0.78rem;
            color: var(--text-light);
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 4px;
            transition: all 0.15s;
            font-family: inherit;
        }
        .btn-icon:hover { background: var(--bg-gray-100); color: var(--text-dark); border-color: var(--accent); }
        .conv-age {
            font-size: 0.65rem;
            color: var(--text-muted);
            margin-top: 1px;
        }

        /* --- 가운데: 채팅 영역 --- */
        .chat-center {
            flex: 1;
            display: flex;
            flex-direction: column;
            min-width: 0;
            background: var(--bg-gray);
        }

        /* 채팅 메시지 영역 */
        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 28px 24px;
            display: flex;
            flex-direction: column;
            gap: 6px;
        }
        .chat-messages::-webkit-scrollbar { width: 5px; }
        .chat-messages::-webkit-scrollbar-thumb { background: var(--border); border-radius: 3px; }

        /* 빈 상태 — 초기 중앙 화면 */
        .chat-welcome {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            color: var(--text-muted);
            padding: 40px 40px 20px;
        }
        .chat-welcome-icon {
            width: 72px; height: 72px;
            background: var(--gradient);
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            margin-bottom: 20px;
            box-shadow: 0 4px 16px rgba(0,153,204,0.25);
        }
        .chat-welcome h3 {
            font-size: 1.15rem;
            color: var(--text-dark);
            font-weight: 600;
            margin-bottom: 8px;
        }
        .chat-welcome p { font-size: 0.85rem; line-height: 1.6; max-width: 320px; }

        /* 초기 화면 문서 칩 */
        .welcome-docs {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            justify-content: center;
            margin-top: 20px;
            max-width: 480px;
        }
        .welcome-doc-chip {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 7px 14px;
            background: white;
            border: 1.5px solid var(--border);
            border-radius: 20px;
            font-size: 0.78rem;
            color: var(--text-regular);
            cursor: pointer;
            transition: all 0.2s;
            user-select: none;
        }
        .welcome-doc-chip:hover { border-color: var(--accent); background: var(--primary-light); }
        .welcome-doc-chip.selected { border-color: var(--accent); background: rgba(0,153,204,0.1); color: var(--primary); font-weight: 500; }
        .welcome-doc-chip .chip-check { font-size: 0.7rem; }

        /* 초기 화면 입력 박스 */
        .welcome-input-wrap {
            margin-top: 24px;
            width: 100%;
            max-width: 520px;
        }
        .welcome-input-box {
            display: flex;
            align-items: center;
            gap: 10px;
            background: white;
            border: 1.5px solid var(--border);
            border-radius: 14px;
            padding: 6px 6px 6px 18px;
            transition: border-color 0.2s, box-shadow 0.2s;
            box-shadow: var(--shadow-md);
        }
        .welcome-input-box:focus-within {
            border-color: var(--accent);
            box-shadow: 0 0 0 3px rgba(0,153,204,0.1), var(--shadow-md);
        }
        .welcome-input-box input {
            flex: 1;
            border: none;
            outline: none;
            font-size: 0.9rem;
            font-family: inherit;
            color: var(--text-regular);
            background: transparent;
        }
        .welcome-input-box input::placeholder { color: var(--text-muted); }
        .welcome-hint {
            font-size: 0.72rem;
            color: var(--text-muted);
            margin-top: 10px;
        }

        /* 메시지 버블 */
        .msg-row {
            display: flex;
            gap: 10px;
            max-width: 78%;
            animation: msgFadeIn 0.3s ease;
        }
        @keyframes msgFadeIn {
            from { opacity: 0; transform: translateY(8px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .msg-row.user { align-self: flex-end; flex-direction: row-reverse; }
        .msg-row.assistant { align-self: flex-start; }

        .msg-avatar {
            width: 34px; height: 34px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.85rem;
            flex-shrink: 0;
            font-weight: 600;
            margin-top: 2px;
        }
        .msg-row.user .msg-avatar { background: var(--primary); color: white; }
        .msg-row.assistant .msg-avatar { background: var(--gradient); color: white; }

        .msg-content { display: flex; flex-direction: column; gap: 4px; min-width: 0; }
        .msg-bubble {
            padding: 12px 16px;
            font-size: 0.88rem;
            line-height: 1.65;
            white-space: pre-wrap;
            word-break: break-word;
        }
        .msg-row.user .msg-bubble {
            background: var(--primary);
            color: white;
            border-radius: 16px 16px 4px 16px;
            box-shadow: 0 2px 8px rgba(0,51,102,0.2);
        }
        .msg-row.assistant .msg-bubble {
            background: white;
            color: var(--text-regular);
            border-radius: 16px 16px 16px 4px;
            box-shadow: var(--shadow-sm);
        }
        .msg-refs-link {
            font-size: 0.75rem;
            color: var(--accent);
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 4px;
            padding: 2px 0;
            transition: color 0.15s;
        }
        .msg-refs-link:hover { color: var(--primary); text-decoration: underline; }
        .msg-time {
            font-size: 0.68rem;
            color: var(--text-muted);
            padding: 0 2px;
        }

        /* 타이핑 인디케이터 */
        .typing-indicator {
            display: flex;
            gap: 5px;
            padding: 14px 18px;
        }
        .typing-indicator span {
            width: 8px; height: 8px;
            background: var(--text-muted);
            border-radius: 50%;
            animation: typingBounce 1.4s infinite ease-in-out both;
        }
        .typing-indicator span:nth-child(1) { animation-delay: -0.32s; }
        .typing-indicator span:nth-child(2) { animation-delay: -0.16s; }
        @keyframes typingBounce {
            0%, 80%, 100% { transform: scale(0.4); opacity: 0.4; }
            40% { transform: scale(1); opacity: 1; }
        }

        /* 입력 영역 */
        .chat-input-wrap {
            padding: 16px 24px 20px;
            background: transparent;
        }
        .chat-input-box {
            display: flex;
            align-items: center;
            gap: 10px;
            background: white;
            border: 1.5px solid var(--border);
            border-radius: 14px;
            padding: 6px 6px 6px 18px;
            transition: border-color 0.2s, box-shadow 0.2s;
        }
        .chat-input-box:focus-within {
            border-color: var(--accent);
            box-shadow: 0 0 0 3px rgba(0,153,204,0.1);
        }
        .chat-input-box input {
            flex: 1;
            border: none;
            outline: none;
            font-size: 0.9rem;
            font-family: inherit;
            color: var(--text-regular);
            background: transparent;
        }
        .chat-input-box input::placeholder { color: var(--text-muted); }
        .chat-input-box input:disabled { opacity: 0.5; }
        .chat-send-btn {
            width: 40px; height: 40px;
            background: var(--gradient);
            border: none;
            border-radius: 10px;
            color: white;
            font-size: 1.1rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
            flex-shrink: 0;
        }
        .chat-send-btn:hover { opacity: 0.9; transform: scale(1.05); }
        .chat-send-btn:disabled { opacity: 0.35; cursor: not-allowed; transform: none; }

        /* --- 오른쪽 사이드바: 참조 문서 --- */
        .sidebar-ref {
            width: 280px;
            background: white;
            border-left: 1px solid var(--border-light);
            display: flex;
            flex-direction: column;
        }
        .sidebar-ref-header {
            padding: 14px 16px;
            border-bottom: 1px solid var(--border-light);
            font-weight: 600;
            font-size: 0.85rem;
            color: var(--text-dark);
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .sidebar-ref-header .header-icon {
            width: 24px; height: 24px;
            background: var(--primary-light);
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75rem;
        }

        .ref-doc-list {
            overflow-y: auto;
            padding: 10px 12px;
            flex-shrink: 0;
            height: 45%;
        }
        .ref-doc-list::-webkit-scrollbar { width: 4px; }
        .ref-doc-list::-webkit-scrollbar-thumb { background: var(--border); border-radius: 2px; }

        /* 리사이저 핸들 */
        .ref-resizer {
            height: 7px;
            background: var(--border-light);
            cursor: row-resize;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            transition: background 0.15s;
        }
        .ref-resizer:hover, .ref-resizer.dragging { background: var(--accent); }
        .ref-resizer::after {
            content: '';
            width: 32px;
            height: 3px;
            border-radius: 2px;
            background: var(--text-muted);
            opacity: 0.4;
        }
        .ref-resizer:hover::after, .ref-resizer.dragging::after { background: white; opacity: 0.9; }

        .ref-doc-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 9px 10px;
            border-radius: 8px;
            font-size: 0.8rem;
            color: var(--text-regular);
            margin-bottom: 2px;
            transition: background 0.15s;
        }
        .ref-doc-item:hover { background: var(--bg-gray); }
        .ref-doc-item input[type="checkbox"] {
            width: 16px; height: 16px;
            accent-color: var(--accent);
            cursor: pointer;
        }
        .ref-doc-item label {
            cursor: pointer;
            flex: 1;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }
        .ref-doc-all { font-weight: 600; color: var(--text-dark); border-bottom: 1px solid var(--border-light); padding-bottom: 10px; margin-bottom: 4px; }

        /* 참조 청크 패널 */
        .ref-chunks-area {
            flex: 1;
            overflow-y: auto;
            padding: 14px 12px;
            min-height: 60px;
        }
        .ref-chunks-area::-webkit-scrollbar { width: 4px; }
        .ref-chunks-area::-webkit-scrollbar-thumb { background: var(--border); border-radius: 2px; }
        .ref-chunks-title {
            font-size: 0.78rem;
            font-weight: 600;
            color: var(--text-light);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        /* 참조 문서 카드 */
        .ref-chunk-card {
            background: var(--bg-gray);
            border: 1px solid var(--border-light);
            border-radius: 10px;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px 12px;
            cursor: pointer;
            user-select: none;
            transition: all 0.15s;
            font-size: 0.76rem;
        }
        .ref-chunk-card:hover { border-color: var(--accent); background: rgba(0,153,204,0.04); }
        .ref-chunk-card .chunk-file {
            font-weight: 600;
            color: var(--accent);
            font-size: 0.74rem;
            flex: 1;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }
        .ref-chunk-card .chunk-score {
            font-size: 0.65rem;
            color: var(--text-muted);
            display: flex;
            align-items: center;
            gap: 4px;
            flex-shrink: 0;
        }
        .score-bar {
            width: 40px; height: 4px;
            background: var(--bg-gray-100);
            border-radius: 2px;
            overflow: hidden;
        }
        .score-bar-fill {
            height: 100%;
            background: var(--accent);
            border-radius: 2px;
        }

        /* 참조 문서 팝업 */
        .ref-popup-overlay {
            display: none;
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0,0,0,0.45);
            backdrop-filter: blur(4px);
            z-index: 1100;
            justify-content: center;
            align-items: center;
            padding: 24px;
            animation: refPopFadeIn 0.2s ease;
        }
        .ref-popup-overlay.active { display: flex; }
        @keyframes refPopFadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        .ref-popup {
            background: white;
            border-radius: 16px;
            width: 100%;
            max-width: 560px;
            max-height: 75vh;
            display: flex;
            flex-direction: column;
            box-shadow: 0 16px 48px rgba(0,0,0,0.2);
            animation: refPopSlideUp 0.25s ease;
        }
        @keyframes refPopSlideUp {
            from { opacity: 0; transform: translateY(16px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .ref-popup-header {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 18px 22px 14px;
            border-bottom: 1px solid var(--border-light);
        }
        .ref-popup-header .popup-icon {
            width: 36px; height: 36px;
            background: var(--primary-light);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
            flex-shrink: 0;
        }
        .ref-popup-header .popup-info { flex: 1; min-width: 0; }
        .ref-popup-header .popup-filename {
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--text-dark);
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }
        .ref-popup-header .popup-score {
            font-size: 0.75rem;
            color: var(--text-muted);
            margin-top: 2px;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        .ref-popup-header .popup-score .score-bar { width: 60px; }
        .ref-popup-close {
            background: none;
            border: none;
            font-size: 1.4rem;
            color: var(--text-muted);
            cursor: pointer;
            padding: 4px;
            border-radius: 6px;
            transition: all 0.15s;
            line-height: 1;
        }
        .ref-popup-close:hover { color: var(--text-dark); background: var(--bg-gray); }
        .ref-popup-body {
            flex: 1;
            overflow-y: auto;
            padding: 18px 22px 22px;
            font-size: 0.85rem;
            line-height: 1.7;
            color: var(--text-regular);
            white-space: pre-wrap;
            word-break: break-word;
        }
        .ref-popup-body::-webkit-scrollbar { width: 5px; }
        .ref-popup-body::-webkit-scrollbar-thumb { background: var(--border); border-radius: 3px; }


        /* ============================================
           메일 작성 탭
           ============================================ */
        .mail-layout {
            display: flex;
            height: calc(100vh - 105px);
            background: var(--bg-gray);
        }

        /* 왼쪽: 메일 작성 영역 */
        .mail-main {
            flex: 1;
            display: flex;
            flex-direction: column;
            min-width: 0;
            overflow: hidden;
        }

        /* 수신 메일 입력 영역 */
        .mail-incoming {
            background: white;
            border-bottom: none;
            padding: 16px 20px;
            flex-shrink: 0;
            overflow: hidden;
        }

        /* 수신 메일 ↔ 초안 리사이즈 핸들 */
        .mail-resize-handle {
            height: 6px;
            background: var(--border-light);
            cursor: row-resize;
            flex-shrink: 0;
            position: relative;
            transition: background 0.15s;
        }
        .mail-resize-handle:hover,
        .mail-resize-handle.active {
            background: var(--accent);
        }
        .mail-resize-handle::after {
            content: '';
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            width: 32px;
            height: 3px;
            border-radius: 2px;
            background: var(--text-muted);
            opacity: 0.5;
        }
        .mail-resize-handle:hover::after,
        .mail-resize-handle.active::after {
            background: white;
            opacity: 0.9;
        }
        .mail-incoming-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 10px;
        }
        .mail-incoming-header h3 {
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--text-dark);
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .mail-controls {
            display: flex;
            gap: 8px;
            align-items: center;
        }
        .mail-controls select {
            padding: 6px 10px;
            border: 1px solid var(--border);
            border-radius: 8px;
            font-size: 0.8rem;
            font-family: inherit;
            color: var(--text-regular);
            background: white;
            cursor: pointer;
            outline: none;
        }
        .mail-controls select:focus { border-color: var(--accent); }
        .mail-incoming textarea {
            width: 100%;
            height: 100%;
            border: 1.5px solid var(--border);
            border-radius: 10px;
            padding: 12px 14px;
            font-size: 0.85rem;
            font-family: inherit;
            line-height: 1.6;
            color: var(--text-regular);
            resize: none;
            outline: none;
            transition: border-color 0.2s;
            box-sizing: border-box;
        }
        .mail-incoming textarea:focus { border-color: var(--accent); box-shadow: 0 0 0 3px rgba(0,153,204,0.08); }
        .mail-incoming textarea::placeholder { color: var(--text-muted); }

        /* 수신 메일 분할 번역 뷰 */
        .mail-incoming-split {
            display: none;
            gap: 0;
            border: 1.5px solid var(--border);
            border-radius: 10px;
            overflow: hidden;
            height: 100%;
            box-sizing: border-box;
        }
        .mail-incoming-split.visible {
            display: flex;
        }
        .mail-incoming-split .incoming-pane {
            flex: 1;
            display: flex;
            flex-direction: column;
            min-width: 0;
        }
        .mail-incoming-split .incoming-pane + .incoming-pane {
            border-left: 1px solid var(--border-light);
        }
        .mail-incoming-split .incoming-pane-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 6px 12px;
            background: var(--bg-gray);
            border-bottom: 1px solid var(--border-light);
            flex-shrink: 0;
        }
        .mail-incoming-split .incoming-pane-title {
            font-size: 0.78rem;
            font-weight: 600;
            color: var(--text-dark);
            display: flex;
            align-items: center;
            gap: 6px;
        }
        .mail-incoming-split textarea {
            flex: 1;
            width: 100%;
            border: none;
            padding: 10px 12px;
            font-size: 0.83rem;
            font-family: inherit;
            line-height: 1.6;
            color: var(--text-regular);
            resize: none;
            outline: none;
            background: var(--bg-white);
        }
        .mail-incoming-split textarea:read-only {
            background: var(--bg-gray);
            color: var(--text-light);
        }

        /* 분석 결과 */
        .mail-analysis {
            display: none;
            background: var(--primary-light);
            border: 1px solid rgba(0,153,204,0.2);
            border-radius: 10px;
            padding: 12px 14px;
            margin-top: 10px;
            font-size: 0.82rem;
            line-height: 1.6;
            color: var(--primary-dark);
        }
        .mail-analysis.visible { display: block; }
        .mail-analysis-label {
            font-weight: 600;
            font-size: 0.75rem;
            color: var(--accent);
            margin-bottom: 4px;
        }

        /* 편집 영역 (분할 뷰) */
        .mail-editor {
            flex: 1;
            display: flex;
            gap: 0;
            overflow: hidden;
        }
        .mail-pane {
            flex: 1;
            display: flex;
            flex-direction: column;
            min-width: 0;
        }
        .mail-pane + .mail-pane { border-left: 1px solid var(--border-light); }
        .mail-pane-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 10px 16px;
            background: white;
            border-bottom: 1px solid var(--border-light);
            flex-shrink: 0;
        }
        .mail-pane-title {
            font-size: 0.82rem;
            font-weight: 600;
            color: var(--text-dark);
            display: flex;
            align-items: center;
            gap: 6px;
        }
        .mail-pane-badge {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.68rem;
            font-weight: 600;
        }
        .badge-ko { background: #d4edda; color: #155724; }
        .badge-lang { background: #cce5ff; color: #004085; }
        .mail-pane textarea {
            flex: 1;
            width: 100%;
            border: none;
            padding: 16px;
            font-size: 0.85rem;
            font-family: inherit;
            line-height: 1.7;
            color: var(--text-regular);
            resize: none;
            outline: none;
            background: var(--bg-white);
        }
        .mail-pane textarea:read-only {
            background: var(--bg-gray);
            color: var(--text-light);
        }
        .mail-pane textarea::placeholder { color: var(--text-muted); }

        /* 하단 액션 바 */
        .mail-actions {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px 20px;
            background: white;
            border-top: 1px solid var(--border-light);
            flex-shrink: 0;
        }
        .mail-actions-left { display: flex; gap: 8px; }
        .mail-actions-right { display: flex; gap: 8px; }

        /* 새 디자인: 왼쪽 사이드바 */
        .mail-left-sidebar {
            width: 72px;
            background: var(--bg-gray);
            border-right: 1px solid var(--border);
            display: flex;
            flex-direction: column;
            transition: width 0.3s ease;
            overflow: hidden;
        }
        .mail-left-sidebar.expanded,
        .mail-left-sidebar:hover {
            width: 260px;
        }
        .mail-sidebar-toggle {
            padding: 12px;
            text-align: center;
            border-bottom: 1px solid var(--border);
            cursor: pointer;
            font-size: 1.2rem;
            background: var(--bg-white);
        }
        .mail-sidebar-toggle:hover {
            background: var(--bg-gray-100);
        }
        .mail-sidebar-group {
            border-bottom: 1px solid var(--border);
        }
        .mail-sidebar-group-title {
            padding: 12px 16px;
            font-size: 0.7rem;
            font-weight: 600;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            white-space: nowrap;
        }
        .mail-sidebar-item {
            display: flex;
            align-items: center;
            padding: 12px 16px;
            cursor: pointer;
            border-left: 3px solid transparent;
            transition: all 0.2s;
            white-space: nowrap;
        }
        .mail-sidebar-item:hover {
            background: var(--bg-white);
            border-left-color: var(--primary-light);
        }
        .mail-sidebar-item.active {
            background: var(--primary-light);
            border-left-color: var(--primary);
            color: var(--primary-dark);
            font-weight: 600;
        }
        .mail-sidebar-item-icon {
            font-size: 1.3rem;
            width: 40px;
            text-align: center;
            flex-shrink: 0;
        }
        .mail-sidebar-item-text {
            font-size: 0.85rem;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        .mail-left-sidebar.expanded .mail-sidebar-item-text,
        .mail-left-sidebar:hover .mail-sidebar-item-text {
            opacity: 1;
        }
        .mail-left-sidebar.expanded .mail-sidebar-group-title,
        .mail-left-sidebar:hover .mail-sidebar-group-title {
            opacity: 1;
        }
        .mail-sidebar-group-title {
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        /* 오른쪽: 상세 패널 */
        .mail-sidebar {
            width: 300px;
            background: white;
            border-left: 1px solid var(--border-light);
            display: flex;
            flex-direction: column;
        }
        .mail-sidebar-section {
            display: flex;
            flex-direction: column;
        }
        .mail-sidebar-section:first-child {
            flex-shrink: 0;
            max-height: 45%;
        }
        .mail-sidebar-section:last-child {
            flex: 1;
            border-top: 1px solid var(--border-light);
            min-height: 0;
        }
        .mail-sidebar-header {
            padding: 12px 14px;
            font-weight: 600;
            font-size: 0.82rem;
            color: var(--text-dark);
            border-bottom: 1px solid var(--border-light);
            display: flex;
            align-items: center;
            gap: 6px;
            flex-shrink: 0;
        }
        .mail-doc-list {
            overflow-y: auto;
            padding: 8px 10px;
            flex: 1;
        }
        .mail-doc-list::-webkit-scrollbar { width: 4px; }
        .mail-doc-list::-webkit-scrollbar-thumb { background: var(--border); border-radius: 2px; }
        .mail-history-list {
            overflow-y: auto;
            padding: 8px 10px;
            flex: 1;
        }
        .mail-history-list::-webkit-scrollbar { width: 4px; }
        .mail-history-list::-webkit-scrollbar-thumb { background: var(--border); border-radius: 2px; }
        .mail-history-item {
            padding: 10px 12px;
            border-radius: 8px;
            cursor: pointer;
            margin-bottom: 3px;
            transition: all 0.15s;
            position: relative;
        }
        .mail-history-item:hover { background: var(--bg-gray); }
        .mail-history-item.active { background: var(--primary-light); }
        .mail-history-title {
            font-size: 0.8rem;
            color: var(--text-regular);
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            margin-bottom: 2px;
        }
        .mail-history-meta {
            font-size: 0.68rem;
            color: var(--text-muted);
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .mail-history-del {
            position: absolute;
            top: 8px; right: 8px;
            background: none;
            border: none;
            color: var(--text-muted);
            cursor: pointer;
            font-size: 0.75rem;
            padding: 2px 5px;
            border-radius: 4px;
            opacity: 0;
            transition: all 0.15s;
        }
        .mail-history-item:hover .mail-history-del { opacity: 1; }
        .mail-history-del:hover { color: var(--error); background: #fee; }

        /* 메일 로딩 오버레이 */
        .mail-loading {
            display: none;
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(255,255,255,0.8);
            z-index: 10;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            gap: 12px;
        }
        .mail-loading.active { display: flex; }
        .mail-loading-spinner {
            width: 36px; height: 36px;
            border: 3px solid var(--border);
            border-top-color: var(--accent);
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
        }
        @keyframes spin { to { transform: rotate(360deg); } }
        .mail-loading-text {
            font-size: 0.85rem;
            color: var(--text-light);
        }

        /* Gmail 연동 바 */
        .gmail-bar {
            background: white;
            border-bottom: 1px solid var(--border-light);
            padding: 12px 20px;
            display: flex;
            align-items: center;
            gap: 12px;
            flex-wrap: wrap;
            flex-shrink: 0;
        }
        .gmail-bar-title {
            font-weight: 600;
            font-size: 0.85rem;
            color: var(--text-dark);
            white-space: nowrap;
        }
        .gmail-bar input[type="text"],
        .gmail-bar input[type="password"] {
            padding: 6px 10px;
            border: 1px solid var(--border);
            border-radius: 8px;
            font-size: 0.8rem;
            font-family: inherit;
            outline: none;
            width: 180px;
        }
        .gmail-bar input:focus { border-color: var(--accent); }
        .gmail-status {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 0.78rem;
            color: var(--text-light);
        }
        .gmail-status-dot {
            width: 8px; height: 8px;
            border-radius: 50%;
            display: inline-block;
        }
        .gmail-status-dot.connected { background: #28a745; }
        .gmail-status-dot.disconnected { background: #dc3545; }
        .gmail-auto-settings {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.78rem;
            color: var(--text-light);
            margin-left: auto;
        }
        .gmail-auto-settings select {
            padding: 4px 8px;
            border: 1px solid var(--border);
            border-radius: 6px;
            font-size: 0.75rem;
            font-family: inherit;
        }
        .gmail-toggle {
            position: relative;
            width: 36px; height: 20px;
            background: var(--border);
            border-radius: 10px;
            cursor: pointer;
            transition: background 0.2s;
        }
        .gmail-toggle.active { background: #28a745; }
        .gmail-toggle::after {
            content: '';
            position: absolute;
            top: 2px; left: 2px;
            width: 16px; height: 16px;
            background: white;
            border-radius: 50%;
            transition: transform 0.2s;
        }
        .gmail-toggle.active::after { transform: translateX(16px); }

        /* 수신함 탭 전환 */
        .mail-sidebar-tabs {
            display: flex;
            border-bottom: 1px solid var(--border-light);
            flex-shrink: 0;
        }
        .mail-sidebar-tab {
            flex: 1;
            padding: 10px 8px;
            text-align: center;
            font-size: 0.78rem;
            font-weight: 600;
            color: var(--text-light);
            cursor: pointer;
            border-bottom: 2px solid transparent;
            transition: all 0.15s;
            background: none;
            border-top: none;
            border-left: none;
            border-right: none;
        }
        .mail-sidebar-tab:hover { color: var(--text-dark); background: var(--bg-gray); }
        .mail-sidebar-tab.active { color: var(--accent); border-bottom-color: var(--accent); }
        .mail-sidebar-tab .tab-count {
            display: inline-block;
            background: var(--accent);
            color: white;
            font-size: 0.65rem;
            padding: 1px 6px;
            border-radius: 8px;
            margin-left: 4px;
        }

        /* 수신함 아이템 */
        .inbox-item {
            padding: 10px 12px;
            border-radius: 8px;
            cursor: pointer;
            margin-bottom: 3px;
            transition: all 0.15s;
            position: relative;
        }
        .inbox-item:hover { background: var(--bg-gray); }
        .inbox-item.active { background: var(--primary-light); }
        .inbox-item-from {
            font-size: 0.78rem;
            font-weight: 600;
            color: var(--text-dark);
            margin-bottom: 2px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }
        .inbox-item-subject {
            font-size: 0.75rem;
            color: var(--text-regular);
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            margin-bottom: 2px;
        }
        .inbox-item-meta {
            font-size: 0.68rem;
            color: var(--text-muted);
            display: flex;
            align-items: center;
            gap: 6px;
        }
        .badge-status {
            display: inline-block;
            padding: 1px 6px;
            border-radius: 8px;
            font-size: 0.65rem;
            font-weight: 600;
        }
        .badge-new { background: #cce5ff; color: #004085; }
        .badge-draft-ready { background: #fff3cd; color: #856404; }
        .badge-replied { background: #d4edda; color: #155724; }
        .badge-ignored { background: #e2e3e5; color: #383d41; }

        /* ===== 반응형 ===== */
        @media (max-width: 1024px) {
            .sidebar-ref { display: none; }
            .mail-sidebar { display: none; }
        }
        @media (max-width: 768px) {
            .rag-layout { flex-direction: column; height: auto; min-height: calc(100vh - 105px); }
            .sidebar-conv { width: 100%; max-height: 180px; border-right: none; border-bottom: 1px solid var(--border-light); }
            .upload-section { flex-direction: column; }
            .content { padding: 16px; }
            .mail-layout { flex-direction: column; height: auto; min-height: calc(100vh - 105px); }
            .mail-editor { flex-direction: column; }
            .mail-pane + .mail-pane { border-left: none; border-top: 1px solid var(--border-light); }
            .mail-incoming-split { flex-direction: column; max-height: 360px; }
            .mail-incoming-split .incoming-pane + .incoming-pane { border-left: none; border-top: 1px solid var(--border-light); }
        }
        /* ===== 청크 수정 ===== */
        .chunk-edit-btn {
            float: right;
            background: none;
            border: 1px solid var(--border);
            border-radius: 6px;
            padding: 3px 10px;
            font-size: 0.72rem;
            color: var(--accent);
            cursor: pointer;
            transition: all 0.15s;
            font-family: inherit;
        }
        .chunk-edit-btn:hover { background: var(--primary-light); border-color: var(--accent); }
        .chunk-textarea {
            width: 100%;
            min-height: 100px;
            border: 1.5px solid var(--accent);
            border-radius: 8px;
            padding: 10px 12px;
            font-size: 0.8rem;
            font-family: inherit;
            line-height: 1.6;
            resize: vertical;
            outline: none;
            box-sizing: border-box;
        }
        .chunk-save-actions {
            display: flex;
            gap: 8px;
            margin-top: 6px;
            justify-content: flex-end;
        }
        .chunk-save-actions button {
            padding: 5px 14px;
            border-radius: 6px;
            font-size: 0.78rem;
            font-family: inherit;
            cursor: pointer;
            border: none;
            transition: all 0.15s;
        }
        .chunk-save-actions .save-btn { background: var(--primary); color: white; }
        .chunk-save-actions .save-btn:hover { background: var(--primary-dark); }
        .chunk-save-actions .save-btn:disabled { opacity: 0.5; cursor: not-allowed; }
        .chunk-save-actions .cancel-btn { background: var(--bg-gray); color: var(--text-light); border: 1px solid var(--border); }
        .chunk-save-actions .cancel-btn:hover { background: var(--bg-gray-100); }

        /* ===== 채팅 UI 개선 ===== */
        .chat-messages { scroll-behavior: smooth; }
        .msg-avatar { border-radius: 50%; overflow: hidden; }
        .msg-avatar img { width: 100%; height: 100%; object-fit: cover; }
        .msg-row.user .msg-avatar { display: none; }  /* 사용자 아이콘 숨김 */
        .msg-row.assistant .msg-bubble {
            border: 1px solid var(--border-light);
            border-radius: 18px 18px 18px 4px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.06);
        }
        .msg-row.user .msg-bubble {
            border-radius: 18px 18px 4px 18px;
            box-shadow: 0 2px 8px rgba(0,51,102,0.2);
        }
        @keyframes msgFadeIn {
            from { opacity: 0; transform: translateY(12px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .msg-time {
            font-size: 0.68rem;
            color: var(--text-muted);
            padding: 0 2px;
        }

        /* ===== 대화 케밥 메뉴 ===== */
        .conv-kebab {
            position: relative;
            opacity: 0;
            transition: opacity 0.15s;
            flex-shrink: 0;
        }
        .conv-item:hover .conv-kebab { opacity: 1; }
        .conv-kebab.open { opacity: 1; }
        .conv-kebab-btn {
            background: none;
            border: none;
            color: var(--text-muted);
            cursor: pointer;
            font-size: 1.1rem;
            padding: 2px 6px;
            border-radius: 6px;
            line-height: 1;
            transition: all 0.15s;
        }
        .conv-kebab-btn:hover { background: var(--bg-gray-100); color: var(--text-dark); }
        .conv-kebab-menu {
            display: none;
            position: absolute;
            right: 0;
            top: 100%;
            background: white;
            border: 1px solid var(--border);
            border-radius: 10px;
            box-shadow: var(--shadow-md);
            min-width: 140px;
            z-index: 100;
            overflow: hidden;
            animation: kebabFadeIn 0.15s ease;
        }
        @keyframes kebabFadeIn {
            from { opacity: 0; transform: translateY(-4px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .conv-kebab-menu.open { display: block; }
        .conv-kebab-menu-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 9px 14px;
            font-size: 0.8rem;
            color: var(--text-regular);
            cursor: pointer;
            transition: background 0.1s;
            border: none;
            background: none;
            width: 100%;
            font-family: inherit;
            text-align: left;
        }
        .conv-kebab-menu-item:hover { background: var(--bg-gray); }
        .conv-kebab-menu-item.danger { color: var(--error); }
        .conv-kebab-menu-item.danger:hover { background: #fff0f0; }
